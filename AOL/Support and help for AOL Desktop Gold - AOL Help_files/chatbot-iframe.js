!function(){"use strict";var e=function(){function e(){this.events={},this.eventCount=0}return e.prototype.emit=function(e,t){if(void 0===t&&(t=""),e in this.events){var n=!1;this.events[e].forEach((function(e){e.fn.apply(null,[t]),e.emitOnce&&(n=!0)})),n&&(this.events[e]=this.events[e].filter((function(e){return!1===e.emitOnce})))}},e.prototype.on=function(e,t,n){void 0===n&&(n=!1),this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].some((function(e){return e.fn===t}))||this.events[e].push({id:this.eventCount++,emitOnce:n,fn:t})},e.prototype.off=function(e,t){this.events.hasOwnProperty(e)&&(this.events[e]=this.events[e].filter((function(e){return e.fn!==t})))},e.prototype.once=function(e,t){this.on(e,t,!0)},e}(),t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};var n,i,s,r=function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)};function o(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{a(i.next(e))}catch(e){r(e)}}function u(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}a((i=i.apply(e,t||[])).next())}))}function u(e,t){var n,i,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,u[0]&&(o=0)),o;)try{if(n=1,i&&(s=2&u[0]?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,i=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(6===u[0]&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],i=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function l(e,t,n){if(n||2===arguments.length)for(var i,s=0,r=t.length;s<r;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,function(e){e.CLIENT_READY="CLIENT_READY",e.CHAT_WINDOW_SHOWN="CHAT_WINDOW_SHOWN",e.WINDOW_FOCUS="WINDOW_FOCUS",e.DATA="DATA",e.TRACK_EVENTS="TRACK_EVENTS",e.MEDIA_QUERY_LIST_EVENT="MEDIA_QUERY_LIST_EVENT",e.INIT_APP="INIT_APP"}(n||(n={})),function(e){e.BOT_RESPONSE="BOT_RESPONSE",e.BUTTON_CLICK="BUTTON_CLICK",e.CHECK_ACTIVE_WINDOW="CHECK_ACTIVE_WINDOW",e.CLOSE_CHAT_WINDOW="CLOSE_CHAT_WINDOW",e.DATA="DATA",e.GET_ACTIVE_WINDOW_STATUS="GET_ACTIVE_WINDOW_STATUS",e.IFRAME_INJECTED="IFRAME_INJECTED",e.IFRAME_INJECT_ERROR="IFRAME_INJECT_ERROR",e.IFRAME_SERVICE_READY="IFRAME_SERVICE_READY",e.LINK_CLICK="LINK_CLICK",e.OPEN_WINDOW="OPEN_WINDOW",e.TERMINATE_SESSION="TERMINATE_SESSION",e.USER_ACTIVITY="USER_ACTIVITY",e.TRACK_EVENTS="TRACK_EVENTS"}(i||(i={})),function(e){e.PAGE_VIEW="PAGE_VIEW",e.START_SESSION="START_SESSION",e.TERMINATE_SESSION="TERMINATE_SESSION",e.INACTIVITY_DETECTED="INACTIVITY_DETECTED",e.LINK_CLICK="LINK_CLICK",e.BUTTON_CLICK="BUTTON_CLICK",e.SUBMIT_FEEDBACK="SUBMIT_FEEDBACK",e.FLOW_INTERACTION="FLOW_INTERACTION",e.USER_MESSAGE="USER_MESSAGE",e.BOT_RESPONSE="BOT_RESPONSE",e.APP_STATUS="APP_STATUS"}(s||(s={}));var h="x-tenant-name",d=function(){},p=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,i=(n=e[0])&&n.stack&&n.message?e[0]:new Error(String(e[0])),s="string"==typeof e[1]?{description:e[1]}:r({},e[1]);try{"newrelic"in window&&window.newrelic.noticeError(i,s)}catch(n){}},f={info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.apply(void 0,l(["info"],c(e),!1))},error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.apply(void 0,l(["error"],c(e),!1))},nr:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p.apply(void 0,l([],c(e),!1))}},g=function(){function e(e){this.eventEmitter=e}return e.prototype.registerListeners=function(){window.addEventListener("message",this.handleClientMessage.bind(this),!1)},e.prototype.handleClientMessage=function(e){if(this.allowedOrigin!==e.origin)return!1;switch(e.data.eventType){case n.CLIENT_READY:this.handleClientReady(e.data.message.serviceParameters);break;case n.TRACK_EVENTS:this.emit(i.TRACK_EVENTS,"",e.data.message),this.sendToClient(i.DATA,e.data.messageId,!0);break;default:this.filterIncomingMessage(e.data.eventType,e.data.messageId,e.data.message)}},e.prototype.getFromClient=function(e,t){var i=this;return void 0===t&&(t={}),new Promise((function(s,r){var o=crypto.randomUUID(),u=void 0,a=function(e){e.messageId===o&&(clearTimeout(u),i.off(n.DATA,a),s(e.message))};i.on(n.DATA,a),i.sendToClient(e,o,t),u=window.setTimeout((function(){r('Error waiting for "'.concat(e,'", waited ').concat(5e3))}),5e3)}))},e.prototype.emit=function(e,t,n){this.eventEmitter.emit(e,n),this.eventEmitter.emit(i.DATA,{status:e,messageId:t,message:n})},e.prototype.sendToClient=function(e,t,n){void 0===t&&(t=crypto.randomUUID()),void 0===n&&(n=""),window.parent.postMessage({eventType:e,messageId:t,message:n},this.allowedOrigin)},e.prototype.filterIncomingMessage=function(e,t,n){},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.openWindow=function(e){return o(this,void 0,void 0,(function(){return u(this,(function(t){return this.sendToClient(i.OPEN_WINDOW,void 0,e),[2]}))}))},e.prototype.linkClick=function(e){return o(this,void 0,void 0,(function(){return u(this,(function(t){return this.sendToClient(i.LINK_CLICK,void 0,e),[2]}))}))},e.prototype.buttonClick=function(e){return o(this,void 0,void 0,(function(){return u(this,(function(t){return this.sendToClient(i.BUTTON_CLICK,void 0,e),[2]}))}))},e.prototype.isThisTheActiveWindow=function(){return o(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.getFromClient(i.CHECK_ACTIVE_WINDOW)];case 1:return[2,e.sent()]}}))}))},e.prototype.getActiveWindowStatus=function(){return o(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.getFromClient(i.GET_ACTIVE_WINDOW_STATUS)];case 1:return[2,e.sent()]}}))}))},e.prototype.notifyActivity=function(e){this.sendToClient(i.USER_ACTIVITY,void 0,e)},e.prototype.notifyReady=function(e){void 0===e&&(e={}),this.sendToClient(i.IFRAME_SERVICE_READY,void 0,e)},e.prototype.handleClientReady=function(e){},e.prototype.init=function(e){if(e){if(!e||!e.allowedOrigin)throw new Error("Missing trusted domains to accept messages from");if("string"!=typeof e.allowedOrigin)throw new Error("Please enter a valid domain to accept messages from");this.allowedOrigin=e.allowedOrigin}this.registerListeners(),this.sendToClient(i.IFRAME_INJECTED),f.info("chatbot:iframe","iFrame injected in the page, waiting on services to be ready..")},e}();function D(e){return new Promise((function(t){return window.setTimeout(t,e)}))}var m=function(e,t){var n=0;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var r=(new Date).getTime();if(!(r-n<t))return n=r,e.apply(void 0,l([],c(i),!1))}};function F(e){return e.replace(/([-_][a-z])/g,(function(e){return e.toUpperCase().replace(/[-_]/,"")}))}var E=function(e){return o(void 0,void 0,void 0,(function(){var t,n,i;return u(this,(function(s){switch(s.label){case 0:t="",s.label=1;case 1:return s.trys.push([1,6,,7]),[4,fetch(e)];case 2:return(n=s.sent()).ok?[4,n.text()]:[3,4];case 3:return t=s.sent(),[3,5];case 4:console.error("Failed to load content, from url %s, response status: %s",e,n.status),s.label=5;case 5:return[3,7];case 6:return i=s.sent(),console.error("Error fetching content %s",i),[3,7];case 7:return[2,t]}}))}))},b=function(e,t,n){var i=Array.isArray(e)?[]:{};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=e[s];"string"==typeof r&&r.includes(t)?i[s]=r.replace(new RegExp(t,"g"),n):i[s]="object"==typeof r&&null!==r?b(r,t,n):r}return i},w=function(e,t){void 0===t&&(t="");var n,i={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=F(s),o=t?"".concat(t).concat(r.charAt(0).toUpperCase()).concat(r.slice(1)):r;(n=e[s])&&n.constructor===Object?Object.assign(i,w(e[s],o)):i[o]=e[s]}return i},C=function(e,t,n){return void 0===n&&(n=""),o(void 0,void 0,void 0,(function(){var i,s,r,o;return u(this,(function(u){switch(u.label){case 0:return i="",r=v,[4,E(e)];case 1:return s=r.apply(void 0,[u.sent()]),o=s.map((function(e){var i=c(e,2),s=i[0],r=i[1],o=F(s.replace(new RegExp("^--(".concat(n?n+"-":"",")?")),"")),u=r.startsWith("url("),a=t[o];return[s,a?u?"url(".concat(a,")"):a:r]})),o.length>0&&(i=o.map((function(e){var t=c(e,2),n=t[0],i=t[1];return"".concat(n,": ").concat(i)})).join(";\n"),i=":root {\n".concat(i,"\n}")),[2,i]}}))}))},v=function(e){var t=[];try{var n=e.match(/:root\s*{([^}]*)}/);if(n&&n[1]){var i=n[1].match(/--([\w-]+):\s*([^;]+)/g);if(i){var s=i.map((function(e){var t=c(e.split(/:\s*/),2),n=t[0],i=t[1];return[n.trim(),i.trim()]}));t.push.apply(t,l([],c(s),!1))}}}catch(e){console.error("Error extracting CSS variables:",e)}return t},k=function(e,t,n){void 0===n&&(n=!1);var i,s,r=n?function(e,t){var n=e,i=l([],c(e.matchAll(/{{#(.+?)}}(.+?){{\/(.+?)}}/gs)),!1);try{i.forEach((function(e){var i=c(e,4),s=i[0],r=i[1],o=i[3];r===o&&(n=r in t&&""!==t[r]?n.replace(new RegExp("{{#".concat(r,"}}"),""),"").replace(new RegExp("{{/".concat(o,"}}"),""),""):n.replace(s,""))}))}catch(e){}return n}(e,t):e;try{for(var o in t)if(i=t,s=o,Object.prototype.hasOwnProperty.call(i,s)){var u=new RegExp("{{"+o+"}}","g");r=r.replace(u,t[o])}}catch(e){console.error("Error replacing placeholders %s",e),r=""}return r},A=function(e){function s(t,n,i){var s=e.call(this,t)||this;return s.tenantConfigApiEndpoint=n,s.iFrameAssetsUrl=i,s}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}(s,e),s.prototype.getChatbotTenantConfig=function(){return o(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return[4,fetch(this.tenantConfigApiEndpoint,{method:"GET",headers:(e={"Content-Type":"application/json"},e[h]=window.chatbotIFrame.tenantName,e),credentials:"include"})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}}))}))},s.prototype.filterIncomingMessage=function(e,t,n){this.emit(e,t,n)},s.prototype.getClientAssets=function(){return o(this,void 0,void 0,(function(){var e,t,n,i,s,o,a,c,l;return u(this,(function(u){switch(u.label){case 0:e={cssUrl:"",cssVariables:"",buttonHtml:""},f.info("chatbot:iframe","Prepping client assets.."),u.label=1;case 1:return u.trys.push([1,5,,6]),t=this.iFrameAssetsUrl.replace(/iframe$/,"client"),n="".concat(t,"/").concat(this.tenantConfig.chatButton.theme),[4,E("".concat(n,"/chat-button.html"))];case 2:return i=u.sent(),s=r(r(r({},w(this.tenantConfig.chatButton,"chatButton")),w(this.tenantConfig.chatWindow,"chatWindow")),w(this.tenantConfig.pageMask,"pageMask")),f.info("chatbot:iframe","Flattened tenant config options for CSS: %o",s),i?((o=b(s,"./","".concat(n,"/"))).clientAssetsThemeUrl=n,e.buttonHtml=k(i,o),e.cssUrl="".concat(n,"/index.css"),a=e.cssUrl.replace(/\.css$/,".variables.css"),c=e,[4,C(a,o,"ais-chatbot")]):[3,4];case 3:c.cssVariables=u.sent(),u.label=4;case 4:return[3,6];case 5:return l=u.sent(),f.error("chatbot:iframe","Error preparing client side styles, chat button: %s",l),[3,6];case 6:return[2,e]}}))}))},s.prototype.handleClientReady=function(e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){var t,i,s,r;return u(this,(function(o){switch(o.label){case 0:return t=e.tenantName,i=e.userEmail,this.tenantName=t,this.userEmail=i,s=this,[4,this.getChatbotTenantConfig()];case 1:return s.tenantConfig=o.sent(),f.info("chatbot:iframe","Tenant config: %o",this.tenantConfig),this.emit(n.INIT_APP,""),[4,this.getClientAssets()];case 2:return r=o.sent(),this.notifyReady({tenantConfig:this.tenantConfig,clientAssets:r}),[2]}}))}))},s.prototype.closeChatWindow=function(){return o(this,void 0,void 0,(function(){return u(this,(function(e){return this.sendToClient(i.CLOSE_CHAT_WINDOW),[2]}))}))},s.prototype.botResponse=function(e){return o(this,void 0,void 0,(function(){return u(this,(function(t){return this.sendToClient(i.BOT_RESPONSE,void 0,e),[2]}))}))},s.prototype.terminateSession=function(e){this.sendToClient(i.TERMINATE_SESSION,void 0,e)},s.prototype.init=function(t){e.prototype.init.call(this,t)},s}(g);function y(){}function _(e){return e()}function x(){return Object.create(null)}function T(e){e.forEach(_)}function I(e){return"function"==typeof e}function B(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let S;function $(e,t){return e===t||(S||(S=document.createElement("a")),S.href=t,e===S.href)}function N(e,...t){if(null==e){for(const e of t)e(void 0);return y}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function O(e){let t;return N(e,(e=>t=e))(),t}function R(e,t,n){e.$$.on_destroy.push(N(t,n))}const M="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function L(e,t){e.appendChild(t)}function z(e,t,n){e.insertBefore(t,n||null)}function P(e){e.parentNode&&e.parentNode.removeChild(e)}function U(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function H(e){return document.createElement(e)}function W(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function V(e){return document.createTextNode(e)}function K(){return V(" ")}function j(){return V("")}function Q(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function q(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Z(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Y(e,t){t=""+t,e.data!==t&&(e.data=t)}function G(e,t){e.value=null==t?"":t}function J(e,t,n,i){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function X(e,t,n){e.classList.toggle(t,!!n)}class ee{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=W(t.nodeName):this.e=H(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)z(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(P)}}let te;function ne(e){te=e}function ie(){if(!te)throw new Error("Function called outside component initialization");return te}function se(e){ie().$$.on_mount.push(e)}function re(){const e=ie();return(t,n,{cancelable:i=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=function(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}(t,n,{cancelable:i});return s.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}const oe=[],ue=[];let ae=[];const ce=[],le=Promise.resolve();let he=!1;function de(){he||(he=!0,le.then(me))}function pe(){return de(),le}function fe(e){ae.push(e)}const ge=new Set;let De=0;function me(){if(0!==De)return;const e=te;do{try{for(;De<oe.length;){const e=oe[De];De++,ne(e),Fe(e.$$)}}catch(e){throw oe.length=0,De=0,e}for(ne(null),oe.length=0,De=0;ue.length;)ue.pop()();for(let e=0;e<ae.length;e+=1){const t=ae[e];ge.has(t)||(ge.add(t),t())}ae.length=0}while(oe.length);for(;ce.length;)ce.pop()();he=!1,ge.clear(),ne(e)}function Fe(e){if(null!==e.fragment){e.update(),T(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(fe)}}const Ee=new Set;let be;function we(){be={r:0,c:[],p:be}}function Ce(){be.r||T(be.c),be=be.p}function ve(e,t){e&&e.i&&(Ee.delete(e),e.i(t))}function ke(e,t,n,i){if(e&&e.o){if(Ee.has(e))return;Ee.add(e),be.c.push((()=>{Ee.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}function Ae(e){return void 0!==e?.length?e:Array.from(e)}function ye(e){e&&e.c()}function _e(e,t,n){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),fe((()=>{const t=e.$$.on_mount.map(_).filter(I);e.$$.on_destroy?e.$$.on_destroy.push(...t):T(t),e.$$.on_mount=[]})),s.forEach(fe)}function xe(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];ae.forEach((i=>-1===e.indexOf(i)?t.push(i):n.push(i))),n.forEach((e=>e())),ae=t}(n.after_update),T(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(e,t,n,i,s,r,o=null,u=[-1]){const a=te;ne(e);const c=e.$$={fragment:null,ctx:[],props:r,update:y,not_equal:s,bound:x(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:x(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};o&&o(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return c.ctx&&s(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),l&&function(e,t){-1===e.$$.dirty[0]&&(oe.push(e),de(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],c.update(),l=!0,T(c.before_update),c.fragment=!!i&&i(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach(P)}else c.fragment&&c.fragment.c();t.intro&&ve(e.$$.fragment),_e(e,t.target,t.anchor),me()}ne(a)}class Ie{$$=void 0;$$set=void 0;$destroy(){xe(this,1),this.$destroy=y}$on(e,t){if(!I(t))return y;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const Be=[];function Se(e,t=y){let n;const i=new Set;function s(t){if(B(e,t)&&(e=t,n)){const t=!Be.length;for(const t of i)t[1](),Be.push(t,e);if(t){for(let e=0;e<Be.length;e+=2)Be[e][0](Be[e+1]);Be.length=0}}}function r(t){s(t(e))}return{set:s,update:r,subscribe:function(o,u=y){const a=[o,u];return i.add(a),1===i.size&&(n=t(s,r)||y),o(e),()=>{i.delete(a),0===i.size&&n&&(n(),n=null)}}}}var $e;function Ne(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}!function(e){e.RESET_SESSION="reset-session",e.MARK_ERROR="mark-error"}($e||($e={}));let Oe={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Re(e){Oe=e}const Me=/[&<>"']/,Le=new RegExp(Me.source,"g"),ze=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Pe=new RegExp(ze.source,"g"),Ue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He=e=>Ue[e];function We(e,t){if(t){if(Me.test(e))return e.replace(Le,He)}else if(ze.test(e))return e.replace(Pe,He);return e}const Ve=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;const Ke=/(^|[^\[])\^/g;function je(e,t){e="string"==typeof e?e:e.source,t=t||"";const n={replace:(t,i)=>(i=(i="object"==typeof i&&"source"in i?i.source:i).replace(Ke,"$1"),e=e.replace(t,i),n),getRegex:()=>new RegExp(e,t)};return n}function Qe(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return null}return e}const qe={exec:()=>null};function Ze(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let i=!1,s=t;for(;--s>=0&&"\\"===n[s];)i=!i;return i?"|":" |"})).split(/ \|/);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function Ye(e,t,n){const i=e.length;if(0===i)return"";let s=0;for(;s<i;){const r=e.charAt(i-s-1);if(r!==t||n){if(r===t||!n)break;s++}else s++}return e.slice(0,i-s)}function Ge(e,t,n,i){const s=t.href,r=t.title?We(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){i.state.inLink=!0;const e={type:"link",raw:n,href:s,title:r,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,e}return{type:"image",raw:n,href:s,title:r,text:We(o)}}class Je{options;rules;lexer;constructor(e){this.options=e||Oe}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Ye(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const i=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=i.length?e.slice(i.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=Ye(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(e);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:i,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const i=n.length>1,s={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const r=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let o="",u="",a=!1;for(;e;){let n=!1;if(!(t=r.exec(e)))break;if(this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let i=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],l=0;this.options.pedantic?(l=2,u=i.trimStart()):(l=t[2].search(/[^ ]/),l=l>4?1:l,u=i.slice(l),l+=t[1].length);let h=!1;if(!i&&/^ *$/.test(c)&&(o+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,l-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),s=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:\`\`\`|~~~)`),r=new RegExp(`^ {0,${Math.min(3,l-1)}}#`);for(;e;){const a=e.split("\n",1)[0];if(c=a,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),s.test(c))break;if(r.test(c))break;if(t.test(c))break;if(n.test(e))break;if(c.search(/[^ ]/)>=l||!c.trim())u+="\n"+c.slice(l);else{if(h)break;if(i.search(/[^ ]/)>=4)break;if(s.test(i))break;if(r.test(i))break;if(n.test(i))break;u+="\n"+c}h||c.trim()||(h=!0),o+=a+"\n",e=e.substring(a.length+1),i=c.slice(l)}}s.loose||(a?s.loose=!0:/\n *\n *$/.test(o)&&(a=!0));let d,p=null;this.options.gfm&&(p=/^\[[ xX]\] /.exec(u),p&&(d="[ ] "!==p[0],u=u.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:o,task:!!p,checked:d,loose:!1,text:u,tokens:[]}),s.raw+=o}s.items[s.items.length-1].raw=o.trimEnd(),s.items[s.items.length-1].text=u.trimEnd(),s.raw=s.raw.trimEnd();for(let e=0;e<s.items.length;e++)if(this.lexer.state.top=!1,s.items[e].tokens=this.lexer.blockTokens(s.items[e].text,[]),!s.loose){const t=s.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));s.loose=n}if(s.loose)for(let e=0;e<s.items.length;e++)s.items[e].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:i}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const e={type:"table",raw:t[0],header:Ze(t[1]).map((e=>({text:e,tokens:[]}))),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){let t,n,i,s,r=e.align.length;for(t=0;t<r;t++){const n=e.align[t];n&&(/^ *-+: *$/.test(n)?e.align[t]="right":/^ *:-+: *$/.test(n)?e.align[t]="center":/^ *:-+ *$/.test(n)?e.align[t]="left":e.align[t]=null)}for(r=e.rows.length,t=0;t<r;t++)e.rows[t]=Ze(e.rows[t],e.header.length).map((e=>({text:e,tokens:[]})));for(r=e.header.length,n=0;n<r;n++)e.header[n].tokens=this.lexer.inline(e.header[n].text);for(r=e.rows.length,n=0;n<r;n++)for(s=e.rows[n],i=0;i<s.length;i++)s[i].tokens=this.lexer.inline(s[i].text);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:We(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=Ye(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let i=0;i<e.length;i++)if("\\"===e[i])i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],i="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],i=e[3])}else i=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),Ge(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:i?i.replace(this.rules.inline._escapes,"$1"):i},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Ge(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i)return;if(i[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...i[0]].length-1;let s,r,o=n,u=0;const a="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(a.lastIndex=0,t=t.slice(-1*e.length+i[0].length-1);null!=(i=a.exec(t));){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(r=[...s].length,i[3]||i[4]){o+=r;continue}if((i[5]||i[6])&&n%3&&!((n+r)%3)){u+=r;continue}if(o-=r,o>0)continue;r=Math.min(r,r+o+u);const t=[...e].slice(0,n+i.index+r+1).join("");if(Math.min(n,r)%2){const e=t.slice(1,-1);return{type:"em",raw:t,text:e,tokens:this.lexer.inlineTokens(e)}}const a=t.slice(2,-2);return{type:"strong",raw:t,text:a,tokens:this.lexer.inlineTokens(a)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),i=/^ /.test(e)&&/ $/.test(e);return n&&i&&(e=e.substring(1,e.length-1)),e=We(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=We(t[1]),n="mailto:"+e):(e=We(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=We(t[0]),n="mailto:"+e;else{let i;do{i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0]}while(i!==t[0]);e=We(t[0]),n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:We(t[0]),{type:"text",raw:t[0],text:e}}}}const Xe={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:qe,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Xe.def=je(Xe.def).replace("label",Xe._label).replace("title",Xe._title).getRegex(),Xe.bullet=/(?:[*+-]|\d{1,9}[.)])/,Xe.listItemStart=je(/^( *)(bull) */).replace("bull",Xe.bullet).getRegex(),Xe.list=je(Xe.list).replace(/bull/g,Xe.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Xe.def.source+")").getRegex(),Xe._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Xe._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Xe.html=je(Xe.html,"i").replace("comment",Xe._comment).replace("tag",Xe._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Xe.lheading=je(Xe.lheading).replace(/bull/g,Xe.bullet).getRegex(),Xe.paragraph=je(Xe._paragraph).replace("hr",Xe.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xe._tag).getRegex(),Xe.blockquote=je(Xe.blockquote).replace("paragraph",Xe.paragraph).getRegex(),Xe.normal={...Xe},Xe.gfm={...Xe.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Xe.gfm.table=je(Xe.gfm.table).replace("hr",Xe.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xe._tag).getRegex(),Xe.gfm.paragraph=je(Xe._paragraph).replace("hr",Xe.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Xe.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xe._tag).getRegex(),Xe.pedantic={...Xe.normal,html:je("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Xe._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:qe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:je(Xe.normal._paragraph).replace("hr",Xe.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Xe.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const et={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:qe,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:qe,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};et.punctuation=je(et.punctuation,"u").replace(/punctuation/g,et._punctuation).getRegex(),et.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,et.anyPunctuation=/\\[punct]/g,et._escapes=/\\([punct])/g,et._comment=je(Xe._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),et.emStrong.lDelim=je(et.emStrong.lDelim,"u").replace(/punct/g,et._punctuation).getRegex(),et.emStrong.rDelimAst=je(et.emStrong.rDelimAst,"gu").replace(/punct/g,et._punctuation).getRegex(),et.emStrong.rDelimUnd=je(et.emStrong.rDelimUnd,"gu").replace(/punct/g,et._punctuation).getRegex(),et.anyPunctuation=je(et.anyPunctuation,"gu").replace(/punct/g,et._punctuation).getRegex(),et._escapes=je(et._escapes,"gu").replace(/punct/g,et._punctuation).getRegex(),et._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,et._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,et.autolink=je(et.autolink).replace("scheme",et._scheme).replace("email",et._email).getRegex(),et._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,et.tag=je(et.tag).replace("comment",et._comment).replace("attribute",et._attribute).getRegex(),et._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,et._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,et._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,et.link=je(et.link).replace("label",et._label).replace("href",et._href).replace("title",et._title).getRegex(),et.reflink=je(et.reflink).replace("label",et._label).replace("ref",Xe._label).getRegex(),et.nolink=je(et.nolink).replace("ref",Xe._label).getRegex(),et.reflinkSearch=je(et.reflinkSearch,"g").replace("reflink",et.reflink).replace("nolink",et.nolink).getRegex(),et.normal={...et},et.pedantic={...et.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:je(/^!?\[(label)\]\((.*?)\)/).replace("label",et._label).getRegex(),reflink:je(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",et._label).getRegex()},et.gfm={...et.normal,escape:je(et.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},et.gfm.url=je(et.gfm.url,"i").replace("email",et.gfm._extended_email).getRegex(),et.breaks={...et.gfm,br:je(et.br).replace("{2,}","*").getRegex(),text:je(et.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class tt{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Oe,this.options.tokenizer=this.options.tokenizer||new Je,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Xe.normal,inline:et.normal};this.options.pedantic?(t.block=Xe.pedantic,t.inline=et.pedantic):this.options.gfm&&(t.block=Xe.gfm,this.options.breaks?t.inline=et.breaks:t.inline=et.gfm),this.tokenizer.rules=t}static get rules(){return{block:Xe,inline:et}}static lex(e,t){return new tt(t).lex(e)}static lexInline(e,t){return new tt(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,i,s,r;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((i=>!!(n=i.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(n):(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(s=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let i;this.options.extensions.startBlock.forEach((e=>{i=e.call({lexer:this},n),"number"==typeof i&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s)))i=t[t.length-1],r&&"paragraph"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),r=s.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,i,s,r,o,u,a=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(a));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(a));)a=a.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(a));)a=a.slice(0,r.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(o||(u=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((i=>!!(n=i.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),i=t[t.length-1],i&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),i=t[t.length-1],i&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,a,u))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(s=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let i;this.options.extensions.startInline.forEach((e=>{i=e.call({lexer:this},n),"number"==typeof i&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(s))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(u=n.raw.slice(-1)),o=!0,i=t[t.length-1],i&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class nt{options;constructor(e){this.options=e||Oe}code(e,t,n){const i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="language-'+We(i)+'">'+(n?e:We(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:We(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,n){const i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"}listitem(e,t,n){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const i=Qe(e);if(null===i)return n;let s='<a href="'+(e=i)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>",s}image(e,t,n){const i=Qe(e);if(null===i)return n;let s=`<img src="${e=i}" alt="${n}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}}class it{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class st{options;renderer;textRenderer;constructor(e){this.options=e||Oe,this.options.renderer=this.options.renderer||new nt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new it}static parse(e,t){return new st(t).parse(e)}static parseInline(e,t){return new st(t).parseInline(e)}parse(e,t=!0){let n="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const e=s,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}switch(s.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const e=s;n+=this.renderer.heading(this.parseInline(e.tokens),e.depth,this.parseInline(e.tokens,this.textRenderer).replace(Ve,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")));continue}case"code":{const e=s;n+=this.renderer.code(e.text,e.lang,!!e.escaped);continue}case"table":{const e=s;let t="",i="";for(let t=0;t<e.header.length;t++)i+=this.renderer.tablecell(this.parseInline(e.header[t].tokens),{header:!0,align:e.align[t]});t+=this.renderer.tablerow(i);let r="";for(let t=0;t<e.rows.length;t++){const n=e.rows[t];i="";for(let t=0;t<n.length;t++)i+=this.renderer.tablecell(this.parseInline(n[t].tokens),{header:!1,align:e.align[t]});r+=this.renderer.tablerow(i)}n+=this.renderer.table(t,r);continue}case"blockquote":{const e=s,t=this.parse(e.tokens);n+=this.renderer.blockquote(t);continue}case"list":{const e=s,t=e.ordered,i=e.start,r=e.loose;let o="";for(let t=0;t<e.items.length;t++){const n=e.items[t],i=n.checked,s=n.task;let u="";if(n.task){const e=this.renderer.checkbox(!!i);r?n.tokens.length>0&&"paragraph"===n.tokens[0].type?(n.tokens[0].text=e+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&"text"===n.tokens[0].tokens[0].type&&(n.tokens[0].tokens[0].text=e+" "+n.tokens[0].tokens[0].text)):n.tokens.unshift({type:"text",text:e+" "}):u+=e+" "}u+=this.parse(n.tokens,r),o+=this.renderer.listitem(u,s,!!i)}n+=this.renderer.list(o,t,i);continue}case"html":{const e=s;n+=this.renderer.html(e.text,e.block);continue}case"paragraph":{const e=s;n+=this.renderer.paragraph(this.parseInline(e.tokens));continue}case"text":{let r=s,o=r.tokens?this.parseInline(r.tokens):r.text;for(;i+1<e.length&&"text"===e[i+1].type;)r=e[++i],o+="\n"+(r.tokens?this.parseInline(r.tokens):r.text);n+=t?this.renderer.paragraph(o):o;continue}default:{const e='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let i=0;i<e.length;i++){const s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const e=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){n+=e||"";continue}}switch(s.type){case"escape":{const e=s;n+=t.text(e.text);break}case"html":{const e=s;n+=t.html(e.text);break}case"link":{const e=s;n+=t.link(e.href,e.title,this.parseInline(e.tokens,t));break}case"image":{const e=s;n+=t.image(e.href,e.title,e.text);break}case"strong":{const e=s;n+=t.strong(this.parseInline(e.tokens,t));break}case"em":{const e=s;n+=t.em(this.parseInline(e.tokens,t));break}case"codespan":{const e=s;n+=t.codespan(e.text);break}case"br":n+=t.br();break;case"del":{const e=s;n+=t.del(this.parseInline(e.tokens,t));break}case"text":{const e=s;n+=t.text(e.text);break}default:{const e='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class rt{options;constructor(e){this.options=e||Oe}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const ot=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(tt.lex,st.parse);parseInline=this.#e(tt.lexInline,st.parseInline);Parser=st;parser=st.parse;Renderer=nt;TextRenderer=it;Lexer=tt;lexer=tt.lex;Tokenizer=Je;Hooks=rt;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(const i of e)switch(n=n.concat(t.call(this,i)),i.type){case"table":{const e=i;for(const i of e.header)n=n.concat(this.walkTokens(i.tokens,t));for(const i of e.rows)for(const e of i)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=i;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=i;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((i=>{n=n.concat(this.walkTokens(e[i],t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let i=e.renderer.apply(this,t);return!1===i&&(i=n.apply(this,t)),i}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new nt(this.defaults);for(const n in e.renderer){const i=e.renderer[n],s=n,r=t[s];t[s]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=r.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new Je(this.defaults);for(const n in e.tokenizer){const i=e.tokenizer[n],s=n,r=t[s];t[s]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=r.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new rt;for(const n in e.hooks){const i=e.hooks[n],s=n,r=t[s];rt.passThroughHooks.has(n)?t[s]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then((e=>r.call(t,e)));const n=i.call(t,e);return r.call(t,n)}:t[s]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=r.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,i=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(i.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}#e(e,t){return(n,i)=>{const s={...i},r={...this.defaults,...s};!0===this.defaults.async&&!1===s.async&&(r.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),r.async=!0);const o=this.#t(!!r.silent,!!r.async);if(null==n)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(r.hooks&&(r.hooks.options=r),r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(n):n).then((t=>e(t,r))).then((e=>r.walkTokens?Promise.all(this.walkTokens(e,r.walkTokens)).then((()=>e)):e)).then((e=>t(e,r))).then((e=>r.hooks?r.hooks.postprocess(e):e)).catch(o);try{r.hooks&&(n=r.hooks.preprocess(n));const i=e(n,r);r.walkTokens&&this.walkTokens(i,r.walkTokens);let s=t(i,r);return r.hooks&&(s=r.hooks.postprocess(s)),s}catch(e){return o(e)}}}#t(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+We(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function ut(e,t){return ot.parse(e,t)}ut.options=ut.setOptions=function(e){return ot.setOptions(e),ut.defaults=ot.defaults,Re(ut.defaults),ut},ut.getDefaults=Ne,ut.defaults=Oe,ut.use=function(...e){return ot.use(...e),ut.defaults=ot.defaults,Re(ut.defaults),ut},ut.walkTokens=function(e,t){return ot.walkTokens(e,t)},ut.parseInline=ot.parseInline,ut.Parser=st,ut.parser=st.parse,ut.Renderer=nt,ut.TextRenderer=it,ut.Lexer=tt,ut.lexer=tt.lex,ut.Tokenizer=Je,ut.Hooks=rt,ut.parse=ut,ut.options,ut.setOptions,ut.use,ut.walkTokens,ut.parseInline;const at=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g,ct=Object.hasOwnProperty;class lt{constructor(){this.occurrences,this.reset()}slug(e,t){const n=this;let i=function(e,t){if("string"!=typeof e)return"";t||(e=e.toLowerCase());return e.replace(at,"").replace(/ /g,"-")}(e,!0===t);const s=i;for(;ct.call(n.occurrences,i);)n.occurrences[s]++,i=s+"-"+n.occurrences[s];return n.occurrences[i]=0,i}reset(){this.occurrences=Object.create(null)}}let ht;function dt(e,t){ut.use(function({prefix:e=""}={}){return{headerIds:!1,hooks:{preprocess:e=>(ht=new lt,e)},renderer:{heading:(t,n,i)=>(i=i.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,""),`<h${n} id="${e}${ht.slug(i)}">${t}</h${n}>\n`)}}}()),-1!==e.indexOf("[http")&&(e=e.replace(/\[(http(s)?:\/\/.+?)\](?![\(])/g,"$1"));var n=ut(e),i=null;return t&&Array.isArray(t.citations)&&t.citations.length>0&&(i=t.showExpandedCitations?function(e){return e.citations.map((function(e){var t=e.id,n=e.title,i=e.text,s=e.sourceUrl;return{id:"".concat(s).concat(t),title:n,text:pt(i||"",200)}}))}(t):function(e){return e.citations.slice(0,3).map((function(e){var t=e.id,n=e.title,i=e.sourceUrl;return{id:"".concat(i).concat(t),title:n}}))}(t)),{html:n,citationsData:i}}function pt(e,t){if(void 0===e&&(e=""),e.length<=t)return e;var n=e.slice(0,t);return n=n.slice(0,Math.min(n.length,n.lastIndexOf(" "))),"".concat(n," ...")}var ft;!function(e){e.CONTINUE_SESSION_MESSAGE="How can I assist you further?",e.TECHNICAL_ISSUE_MESSAGE="Sorry, but a technical issue prevented me from receiving your request. Could you please try it again?",e.INACTIVITY_PROMPT="I haven't heard from you in a few minutes. Is there anything I can still help you with?"}(ft||(ft={}));var gt=300,Dt="https://helpchatbot-service.aol.com/api/chat-session",mt="https://helpchatbot-service.aol.com/api/chat/preprocess",Ft="https://helpchatbot-service.aol.com/api/chat/process",Et="https://helpchatbot-service.aol.com/api/flows",bt="https://helpchatbot-service.aol.com/api/reaction",wt="https://helpchatbot-service.aol.com/api/feedback";function Ct(e,t,n,i){return o(this,void 0,void 0,(function(){var s,o,a,l,h,d,p;return u(this,(function(u){switch(u.label){case 0:return e.update((function(e){return r(r({},e),{isInitialized:!0,disableForm:!0,isBotTyping:!0,tenantConfig:r(r(r({},e.tenantConfig),i),{tenantName:t}),remainingCharacters:i.maxInputChars,userEmail:n})})),f.info("chatbot:iframe","Initializing chatbot store"),[4,Promise.all([kt(i.botInitialMessage),D(2e3)])];case 1:return s=c.apply(void 0,[u.sent(),1]),o=s[0],[4,St(n)];case 2:return a=u.sent(),l=a.filter((function(e){return!e.autoExecute})),e.update((function(e){return r(r({},e),{disableForm:!1,isBotTyping:!1,messageHistory:o,tenantConfig:r(r({},e.tenantConfig),i),suggestions:l.map((function(e){return{id:e.flowId,name:e.name}}))})})),e.subscribe((function(e){h=e}))(),h.isInitialMessageSet?[3,5]:(d=a.find((function(e){return e.autoExecute})))?[4,zt(d.flowId,void 0,O(e).userEmail,void 0)]:[3,4];case 3:u.sent(),Ot(d.flowId,"background_flow"),u.label=4;case 4:(p=a.find((function(e){return null!==e.initialMessage})))&&(Ot(p.flowId,"flow_presented"),e.update((function(e){return r(r({},e),{messageHistory:e.messageHistory.concat({content:p.initialMessage,role:"assistant"}),isInitialMessageSet:!0})}))),u.label=5;case 5:return[2]}}))}))}function vt(e){return o(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,kt(O(e).tenantConfig.botInitialMessage)];case 1:return t=n.sent(),e.update((function(e){return r(r({},e),{messageHistory:t})})),[2]}}))}))}function kt(e){return o(this,void 0,void 0,(function(){var e,t,n,i,s,r,o,c,l,d;return u(this,(function(u){switch(u.label){case 0:return[4,fetch(Dt,{method:"GET",headers:(c={"Content-Type":"application/json"},c[h]=window.chatbotIFrame.tenantName,c),credentials:"include"})];case 1:return e=u.sent(),t=[],e.ok?[4,e.json()]:[3,3];case 2:n=u.sent();try{for(i=a(n),s=i.next();!s.done;s=i.next())null!==(r=s.value).user&&t.push({conversationId:r.turnId,role:"user",content:r.user}),o=_t(r.materials||[],r.assistant||""),t.push({conversationId:r.turnId,role:"assistant",materials:r.materials,citationsData:o.citationsData,content:o.content,reaction:r.reaction,reactionsEligible:r.reactionsEligible})}catch(e){l={error:e}}finally{try{s&&!s.done&&(d=i.return)&&d.call(i)}finally{if(l)throw l.error}}return[3,4];case 3:f.error("chatbot:iframe","Server responded with an error on fetching session history:",e.status,e.statusText),u.label=4;case 4:return[2,t]}}))}))}function At(e){return O(e).messageHistory.filter((function(e){return e.conversationId})).length}function yt(e){return o(this,void 0,void 0,(function(){var t,n;return u(this,(function(i){switch(i.label){case 0:return e.update((function(e){return r(r({},e),{isBotTyping:!0,isInactive:!1,messageHistory:e.messageHistory.concat({role:"assistant",content:ft.INACTIVITY_PROMPT},{content:"Yes",role:"user"})})})),[4,D(1e3)];case 1:return i.sent(),(t=O(e)).activeFlowId?(n=l([],c(t.messageHistory),!1).reverse().find((function(e){return"assistant"===e.role&&e.content!==ft.INACTIVITY_PROMPT})),e.update((function(e){return r(r({},e),{disableForm:!1,isBotTyping:!1,messageHistory:n?e.messageHistory.concat(n):e.messageHistory})}))):e.update((function(e){return r(r({},e),{disableForm:!1,isBotTyping:!1,messageHistory:e.messageHistory.concat({content:ft.CONTINUE_SESSION_MESSAGE,role:"assistant"})})})),[2]}}))}))}function _t(e,t){var n=dt(t,e);return{content:n.html,citationsData:n.citationsData}}function xt(e,t,n){var i=l([],c(e),!1).find((function(e){return e.content===n&&"user"===e.role&&""===e.conversationId}));return i&&(i.conversationId=t),e}function Tt(e,t){return o(this,void 0,void 0,(function(){var n,i,o,a,c,l,h,d,p,f,g,D,m,F;return u(this,(function(u){switch(u.label){case 0:return n=O(e),i=(new Date).getTime(),e.update((function(e){return r(r({},e),{inputValue:"",hasErrors:!1,disableForm:!0,isBotTyping:!0,remainingCharacters:e.tenantConfig.maxInputChars||gt,messageHistory:e.messageHistory.concat({content:n.inputValue,conversationId:"",role:"user"})})})),o=n.activeFlowId,d=[],p=!1,f=n.flowAllowsMessage,g=[],o&&f?[4,zt(o,n.inputValue,n.userEmail,void 0)]:[3,3];case 1:return D=u.sent(),[4,t(D.message,D.actions)];case 2:return u.sent(),a=D.message,d=D.choices,c=D.conversationId,p="COMPLETED"===D.status||"INTERRUPTED"===D.status,g=D.actions,f=D.allowsMessage,l=void 0,[3,5];case 3:return[4,Rt(n.inputValue)];case 4:D=u.sent(),a=D.botResponse,c=D.conversationId,l=D.materials,h=D.reactionsEligible,u.label=5;case 5:return m=(new Date).getTime(),F=_t(l,a),e.update((function(e){var t=xt(e.messageHistory,c,n.inputValue);return r(r({},e),{disableForm:!1,isBotTyping:!1,activeFlowId:p?void 0:e.activeFlowId,suggestions:d,flowAllowsMessage:f,messageHistory:g.includes($e.MARK_ERROR)?e.messageHistory:t.concat({content:F.content,citationsData:F.citationsData,conversationId:c,role:"assistant",materials:l,reactionsEligible:h,isExpanded:!1})})})),window.eventTracker.track([{type:s.USER_MESSAGE,timestamp:i,details:{conversationId:c}},{type:s.BOT_RESPONSE,timestamp:m,details:{conversationId:c}}]),[2]}}))}))}function It(e,t,n){return o(this,void 0,void 0,(function(){var i,o,a,c,l,h;return u(this,(function(u){switch(u.label){case 0:return i=(new Date).getTime(),e.update((function(e){return r(r({},e),{inputValue:"",hasErrors:!1,disableForm:!0,isBotTyping:!0,remainingCharacters:gt,messageHistory:e.messageHistory.concat({content:n,role:"user"})})})),[4,zt(t,void 0,O(e).userEmail,void 0)];case 1:return o=u.sent(),a=o.message,c=o.choices,l=o.conversationId,h=o.allowsMessage,window.eventTracker.track([{type:s.USER_MESSAGE,timestamp:i,details:{isSynthetic:!0,conversationId:l,flowId:t}},{type:s.BOT_RESPONSE,timestamp:(new Date).getTime(),details:{conversationId:l,flowId:t}}]),e.update((function(e){var n=xt(e.messageHistory,l,a);return r(r({},e),{disableForm:!1,isBotTyping:!1,suggestions:c,activeFlowId:t,flowAllowsMessage:h,messageHistory:n.concat({content:a,conversationId:l,role:"assistant"})})})),[2]}}))}))}function Bt(e,t,n,i,s,a){return o(this,void 0,void 0,(function(){var o,c,l,h,d,p,f;return u(this,(function(u){switch(u.label){case 0:return i?e.update((function(e){return r(r({},e),{inputValue:"",hasErrors:!1,disableForm:!0,isBotTyping:!0,remainingCharacters:gt,messageHistory:e.messageHistory.concat({content:i,role:"user"})})})):s&&a&&e.update((function(e){return r(r({},e),{inputValue:"",hasErrors:!1,disableForm:!0,isBotTyping:!0,remainingCharacters:gt,messageHistory:e.messageHistory.concat({content:a,role:"user"})})})),[4,zt(t,i,O(e).userEmail,s)];case 1:return o=u.sent(),c=o.message,l=o.choices,h=o.conversationId,d=o.status,p=o.actions,f=o.allowsMessage,e.update((function(e){var t=xt(e.messageHistory,h,c);return r(r({},e),{disableForm:!1,isBotTyping:!1,activeFlowId:"COMPLETED"===d?void 0:e.activeFlowId,suggestions:l,flowAllowsMessage:f,messageHistory:p.includes($e.MARK_ERROR)?e.messageHistory:t.concat({content:c,conversationId:h,role:"assistant"})})})),[4,n(c,p)];case 2:return u.sent(),[2,{message:c,actions:p}]}}))}))}function St(e){return o(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(Et,"/suggestions"),{method:"POST",headers:(t={"Content-Type":"application/json"},t[h]=window.chatbotIFrame.tenantName,t),credentials:"include",body:JSON.stringify({userId:e})})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))}function $t(){return o(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return[4,fetch(Et,{method:"POST",headers:(e={"Content-Type":"application/json"},e[h]=window.chatbotIFrame.tenantName,e),credentials:"include"})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}}))}))}function Nt(e){return o(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return e.update((function(e){return r(r({},e),{isBotTyping:!0,isInactive:!1,messageHistory:e.messageHistory.concat({role:"assistant",content:ft.INACTIVITY_PROMPT},{content:"No",role:"user"})})})),[4,D(1e3)];case 1:return n.sent(),t=O(e).tenantConfig,e.update((function(e){return r(r({},e),{isBotTyping:!1,terminateSessionMessageShown:!0,messageHistory:e.messageHistory.concat({content:t.terminateSessionMessage,role:"assistant"})})})),[2]}}))}))}function Ot(e,t,n){window.eventTracker.track({type:s.FLOW_INTERACTION,details:{type:t,flowId:e,value:n}})}function Rt(e){return o(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,Mt(e)];case 1:return(t=n.sent()).botResponse?[2,t]:[3,2];case 2:return[4,Lt(e,t.conversationId)];case 3:return[2,n.sent()]}}))}))}function Mt(e){return o(this,void 0,void 0,(function(){var t,n;return u(this,(function(i){switch(i.label){case 0:return[4,fetch(mt,{method:"POST",headers:(n={"Content-Type":"application/json"},n[h]=window.chatbotIFrame.tenantName,n),body:JSON.stringify({message:e}),credentials:"include"})];case 1:return[4,i.sent().json()];case 2:return[2,{botResponse:(t=i.sent()).data.response,conversationId:t.data.conversationId,materials:t.data.materials,reactionsEligible:t.data.reactionsEligible}]}}))}))}function Lt(e,t){return o(this,void 0,void 0,(function(){var n,i;return u(this,(function(s){switch(s.label){case 0:return[4,fetch(Ft,{method:"POST",headers:(i={"Content-Type":"application/json"},i[h]=window.chatbotIFrame.tenantName,i),body:JSON.stringify({message:e,conversationId:t}),credentials:"include"})];case 1:return[4,s.sent().json()];case 2:return[2,{botResponse:(n=s.sent()).data.response,conversationId:n.data.conversationId,materials:n.data.materials,reactionsEligible:n.data.reactionsEligible}]}}))}))}function zt(e,t,n,i){return o(this,void 0,void 0,(function(){var s,r,o;return u(this,(function(u){switch(u.label){case 0:return s="".concat(Et,"/").concat(e),[4,fetch(s,{method:"POST",headers:(o={"Content-Type":"application/json"},o[h]=window.chatbotIFrame.tenantName,o),body:JSON.stringify({message:t,choiceId:i,userId:n}),credentials:"include"})];case 1:return[4,u.sent().json()];case 2:return[2,{message:(r=u.sent()).data.message,conversationId:r.data.conversationId,choices:r.data.choices,status:r.status,actions:r.data.actions,allowsMessage:r.data.allowsMessage}]}}))}))}function Pt(e,t){return o(this,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return[4,fetch(bt,{method:"POST",headers:(n={"Content-Type":"application/json"},n[h]=window.chatbotIFrame.tenantName,n),credentials:"include",body:JSON.stringify({reaction:e,turnId:t})})];case 1:return[4,i.sent().json()];case 2:return[2,i.sent()]}}))}))}function Ut(e){return o(this,void 0,void 0,(function(){var t,n;return u(this,(function(i){switch(i.label){case 0:return[4,fetch(Dt,{method:"DELETE",headers:(n={"Content-Type":"application/json"},n[h]=window.chatbotIFrame.tenantName,n),credentials:"include"})];case 1:return(t=i.sent()).ok||f.error("chatbot:iframe","Server responded with an error on terminating session: %s %s",t.status,t.statusText),f.info("chatbot:iframe","Session terminated, session cookie deleted"),window.chatbotIFrame.terminateSession(e),[2]}}))}))}function Ht(e,t){void 0===t&&(t=null);var n=O(e),i=n.sessionTTLId,s=n.tenantConfig.sessionTTL;if(t&&i&&window.clearTimeout(i),t){var o=window.setTimeout(t,s);e.update((function(e){return r(r({},e),{sessionTTLId:o})}))}}function Wt(e,t,n){var i=window.setTimeout(n,t);e.update((function(e){return r(r({},e),{sessionTerminationId:i})}))}function Vt(e){var t=O(e).sessionTerminationId;t&&(window.clearTimeout(t),e.update((function(e){return r(r({},e),{sessionTerminationId:void 0})})))}var Kt={isInitialized:!1,sessionTTLId:void 0,sessionTerminationId:void 0,activeFlowId:void 0,terminateSessionMessageShown:!1,userEmail:"",inputValue:"",isBotTyping:!1,isInactive:!1,disableForm:!1,hasErrors:!1,errorMsg:void 0,remainingCharacters:void 0,mediaMode:null,messageHistory:[],suggestions:[],sessionSyncId:void 0,isInitialMessageSet:!1,flowAllowsMessage:!0,hideSuggestions:!1,tenantConfig:{tenantName:"",botInitialMessage:"",terminateSessionMessage:"",askFeedback:!1,theme:"",autoOpen:!1,maxInputChars:void 0,sessionTTL:0,terminateSessionTTL:0,chatHeader:{title:"",backgroundColor:"",headerLogoUrl:"",headerLogoAltText:""},chatDialogue:{positiveReactionIconAriaLabel:"",negativeReactionIconAriaLabel:"",loaderText:""},feedbackForm:{title:"",options:[]}}},jt=Se(r({},Kt)),Qt=m((function(){f.info("chatbot:iframe","Session activity detected, will update client cookie"),Jt(),Ht(jt,en)}),500);function qt(){return o(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Yt()];case 1:return e.sent()?Zt():Wt(jt,O(jt).tenantConfig.terminateSessionTTL,qt),[2]}}))}))}function Zt(e){return void 0===e&&(e=!1),o(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return O(jt).terminateSessionMessageShown?[2]:e?[3,3]:(f.info("chatbot:iframe","Terminating session.."),Vt(jt),[4,Nt(jt)]);case 1:return n.sent(),[4,D(2500)];case 2:n.sent(),n.label=3;case 3:return t=O(jt).tenantConfig.terminateSessionMessage,window.eventTracker.track({type:s.TERMINATE_SESSION}),window.eventTracker.disableSendingEvents(),[4,Ut(t)];case 4:return n.sent(),function(e){var t=O(e),n=t.sessionTTLId,i=t.sessionTerminationId,s=t.sessionSyncId;window.clearTimeout(n),window.clearTimeout(i),window.clearInterval(s),e.update((function(e){return r(r({},e),{sessionTTLId:void 0,sessionTerminationId:void 0,sessionSyncId:void 0})}))}(jt),jt.update((function(e){return r({},Kt)})),[2]}}))}))}function Yt(){return o(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,window.chatbotIFrame.isThisTheActiveWindow()];case 1:return[2,e.sent()]}}))}))}function Gt(){return o(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,window.chatbotIFrame.getActiveWindowStatus()];case 1:return[2,e.sent()]}}))}))}function Jt(){window.chatbotIFrame.notifyActivity(At(jt))}function Xt(){return o(this,void 0,void 0,(function(){var e,t;return u(this,(function(n){switch(n.label){case 0:return O(jt).isInitialized?[4,Gt()]:[2];case 1:return(e=n.sent())?e.activityTime<Date.now()-(O(jt).tenantConfig.sessionTTL+O(jt).tenantConfig.terminateSessionTTL+5e3)?(f.info("chatbot:iframe","Client cookie has not been updated in a while, terminating session.."),Zt(!0),[2]):e.isThisTheActiveWindow?[3,4]:(t=e.tenantName===O(jt).tenantConfig.tenantName,e.messageHistorySize!==At(jt)&&t?(f.info("chatbot:iframe","Client cookie indicates chat activity in another window, updating message history.."),[4,vt(jt)]):[3,3]):(f.info("chatbot:iframe","Client cookie not found, terminating session.."),Zt(!0),[2]);case 2:n.sent(),n.label=3;case 3:O(jt).isInactive&&(f.info("chatbot:iframe","Inactivity prompt is showing, clearing it silently.."),Vt(jt),function(e){o(this,void 0,void 0,(function(){return u(this,(function(t){return e.update((function(e){return r(r({},e),{disableForm:!1,isBotTyping:!1,isInactive:!1})})),[2]}))}))}(jt)),n.label=4;case 4:return[2]}}))}))}function en(){return o(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Yt()];case 1:return e.sent()?(f.info("chatbot:iframe","Window is active, showing inactivity prompt"),window.eventTracker.track({type:s.INACTIVITY_DETECTED}),tn(!0),function(e){o(this,void 0,void 0,(function(){return u(this,(function(t){return e.update((function(e){return r(r({},e),{isInactive:!0,disableForm:!0})})),[2]}))}))}(jt),Wt(jt,O(jt).tenantConfig.terminateSessionTTL,qt)):Ht(jt,en),[2]}}))}))}function tn(e){jt.update((function(t){return r(r({},t),{hideSuggestions:e})}))}function nn(e,t){return o(this,void 0,void 0,(function(){var n,i,s,r,o;return u(this,(function(u){if(!t)return[2];try{for(n=a(t),i=n.next();!i.done;i=n.next())(s=i.value)===$e.MARK_ERROR&&rn(jt,e),s===$e.RESET_SESSION&&sn()}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}return[2]}))}))}var sn=function(){setTimeout((function(){return o(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Zt(!0)];case 1:return e.sent(),[2]}}))}))}),2500)},rn=function(e,t){e.update((function(e){return r(r({},e),{hasErrors:!0,errorMsg:t})}))};var on={subscribe:jt.subscribe,set:jt.set,handleInput:function(){var e=O(jt),t=e.inputValue.length,n=e.inputValue,i=0;Qt();var s=e.tenantConfig.maxInputChars||300;t<s?i=s-t:n=e.inputValue.slice(0,s),jt.update((function(e){return r(r({},e),{inputValue:n,remainingCharacters:i})}))},handleSubmit:function(){return o(this,void 0,void 0,(function(){var e,t;return u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Tt(jt,nn)];case 1:return n.sent(),window.eventTracker.enableSendingEvents(),Jt(),[3,3];case 2:return e=n.sent(),f.error(e),t=(i=e).message&&"Endpoint request timed out"===i.message?ft.TECHNICAL_ISSUE_MESSAGE:void 0,jt.update((function(e){return r(r({},e),{disableForm:!1,isBotTyping:!1,hasErrors:!0,errorMsg:t})})),[3,3];case 3:return[2]}var i}))}))},getCurrentFlow:function(){return o(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return[4,$t()];case 1:return e=t.sent(),jt.update((function(t){var n,i;return r(r({},t),{activeFlowId:null!==(n=e.flowId)&&void 0!==n?n:void 0,suggestions:null!==(i=e.choices)&&void 0!==i?i:t.suggestions})})),[2]}}))}))},handleSuggestionClick:function(e){return o(this,void 0,void 0,(function(){var t,n,i;return u(this,(function(o){switch(o.label){case 0:Jt(),t=O(jt),n=t.activeFlowId,o.label=1;case 1:return o.trys.push([1,6,,7]),!n||e.flow_transition?[3,3]:(window.eventTracker.track({type:s.BUTTON_CLICK,details:{intent:e.id,flowId:n,value:e.name}}),[4,Bt(jt,n,nn,void 0,e.id,e.name)]);case 2:return o.sent(),[3,5];case 3:return window.eventTracker.track({type:s.BUTTON_CLICK,details:{intent:"enter_flow",flowId:e.id,value:e.name}}),[4,It(jt,e.id,e.name)];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return i=o.sent(),f.error(i),jt.update((function(e){return r(r({},e),{disableForm:!1,isBotTyping:!1,hasErrors:!0,errorMsg:i})})),[3,7];case 7:return window.eventTracker.enableSendingEvents(),[2]}}))}))},handleReaction:function(e,t){return o(this,void 0,void 0,(function(){var n,i,s,o;return u(this,(function(u){switch(u.label){case 0:return n=O(jt),i=n.messageHistory,-1===(s=i.findIndex((function(t){return t.conversationId===e&&"assistant"===t.role})))?[2]:(o="NONE","LIKE"===t?o="LIKE"===i[s].reaction?"NONE":"LIKE":"DISLIKE"===t&&(o="DISLIKE"===i[s].reaction?"NONE":"DISLIKE"),jt.update((function(e){var t=l([],c(e.messageHistory),!1);return t[s].reaction=o,r(r({},e),{messageHistory:t})})),[4,Pt(o,e)]);case 1:return u.sent(),[2]}}))}))},handleMediaModeChange:function(e){jt.update((function(t){return r(r({},t),{mediaMode:e})}))},handleCitationsClick:function(e){jt.update((function(t){var n=t.messageHistory.map((function(t){return t.conversationId===e&&"assistant"===t.role?r(r({},t),{isExpanded:!t.isExpanded}):t}));return r(r({},t),{messageHistory:n})}))},continueSession:function(){return o(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return Vt(jt),tn(!1),[4,yt(jt)];case 1:return e.sent(),Qt(),[2]}}))}))},terminateSession:Zt,init:function(e,t,n){return o(this,void 0,void 0,(function(){return u(this,(function(i){switch(i.label){case 0:return[4,Ct(jt,e,t,n)];case 1:return i.sent(),Qt(),function(e,t,n){var i=window.setInterval(n,t);e.update((function(e){return r(r({},e),{sessionSyncId:i})}))}(jt,5e3,Xt),At(jt)>0&&window.eventTracker.enableSendingEvents(),[2]}}))}))},onWindowActive:function(){return o(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Yt()];case 1:return e.sent()||(f.info("chatbot:iframe","Window is active, synchronizing session"),Xt()),Qt(),[2]}}))}))}};function un(e){let t,n;return{c(){t=new ee(!1),n=j(),t.a=n},m(i,s){t.m(e[0],i,s),z(i,n,s)},p(e,n){1&n&&t.p(e[0])},d(e){e&&(P(n),t.d())}}}function an(e){let t,n=e[0]&&un(e);return{c(){n&&n.c(),t=j()},m(e,i){n&&n.m(e,i),z(e,t,i)},p(e,[i]){e[0]?n?n.p(e,i):(n=un(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:y,o:y,d(e){e&&P(t),n&&n.d(e)}}}function cn(e,t,n){let i="",{iconUrl:s=""}=t;return se((async()=>{s&&n(0,i=await async function(e){try{const t=await fetch(e);if(t.ok)return await t.text();console.error("Failed to load SVG:",t.status)}catch(e){console.error("Error fetching SVG:",e)}return""}(s))})),e.$$set=e=>{"iconUrl"in e&&n(1,s=e.iconUrl)},[i,s]}class ln extends Ie{constructor(e){super(),Te(this,e,cn,an,B,{iconUrl:1})}}function hn(e,t,n){const i=e.slice();return i[15]=t[n],i}function dn(e){let t,n,i,s,r,o;return{c(){t=H("div"),n=H("input"),i=K(),s=H("button"),s.textContent="Submit",Z(n,"type","text"),Z(n,"placeholder","Please provide your feedback"),Z(n,"class","feedback-form__submit-form__input"),Z(s,"type","button"),Z(s,"class","feedback-form__submit-form__button"),Z(t,"class","feedback-form__submit-form")},m(u,a){z(u,t,a),L(t,n),G(n,e[3]),L(t,i),L(t,s),r||(o=[Q(n,"input",e[11]),Q(s,"click",e[9])],r=!0)},p(e,t){8&t&&n.value!==e[3]&&G(n,e[3])},i:y,o:y,d(e){e&&P(t),r=!1,T(o)}}}function pn(e){let t,n,i=Ae(e[7]),s=[];for(let t=0;t<i.length;t+=1)s[t]=fn(hn(e,i,t));const r=e=>ke(s[e],1,1,(()=>{s[e]=null}));return{c(){t=H("div");for(let e=0;e<s.length;e+=1)s[e].c();Z(t,"class","feedback-form__options")},m(e,i){z(e,t,i);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);n=!0},p(e,n){if(387&n){let o;for(i=Ae(e[7]),o=0;o<i.length;o+=1){const r=hn(e,i,o);s[o]?(s[o].p(r,n),ve(s[o],1)):(s[o]=fn(r),s[o].c(),ve(s[o],1),s[o].m(t,null))}for(we(),o=i.length;o<s.length;o+=1)r(o);Ce()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)ve(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ke(s[e]);n=!1},d(e){e&&P(t),U(s,e)}}}function fn(e){let t,n,i,s,r,o;function u(){return e[10](e[15])}return n=new ln({props:{iconUrl:`${e[1]}/${e[0]}/icon-experience-${e[15].type}.svg`}}),{c(){t=H("button"),ye(n.$$.fragment),i=K(),Z(t,"class","feedback-form__option")},m(e,a){z(e,t,a),_e(n,t,null),L(t,i),s=!0,r||(o=Q(t,"click",u),r=!0)},p(t,i){e=t;const s={};3&i&&(s.iconUrl=`${e[1]}/${e[0]}/icon-experience-${e[15].type}.svg`),n.$set(s)},i(e){s||(ve(n.$$.fragment,e),s=!0)},o(e){ke(n.$$.fragment,e),s=!1},d(e){e&&P(t),xe(n),r=!1,o()}}}function gn(e){let t,n,i,s,r,o,u,a;const c=[pn,dn],l=[];function h(e,t){return e[2]?1:0}return o=h(e),u=l[o]=c[o](e),{c(){t=H("div"),n=H("h2"),n.textContent=`${e[5]}`,i=K(),s=H("p"),s.textContent=`${e[6]}`,r=K(),u.c(),Z(n,"class","feedback-form__title"),Z(s,"class","feedback-form__body"),Z(t,"class","feedback-form")},m(e,u){z(e,t,u),L(t,n),L(t,i),L(t,s),L(t,r),l[o].m(t,null),a=!0},p(e,[n]){let i=o;o=h(e),o===i?l[o].p(e,n):(we(),ke(l[i],1,1,(()=>{l[i]=null})),Ce(),u=l[o],u?u.p(e,n):(u=l[o]=c[o](e),u.c()),ve(u,1),u.m(t,null))},i(e){a||(ve(u),a=!0)},o(e){ke(u),a=!1},d(e){e&&P(t),l[o].d()}}}function Dn(e,t,n){let i,s;R(e,on,(e=>n(13,s=e)));const r=Se("");R(e,r,(e=>n(3,i=e)));const o=re();let u=!1,a=null;const c=s.tenantConfig.feedbackForm.title,l=s.tenantConfig.feedbackForm.body,h=s.tenantConfig.feedbackForm.options;let{chatbotTheme:d}=t,{assetsUrl:p}=t;function f(e){e.askTextFeedback?(a=e,n(2,u=!0)):o("submitFeedback",{type:e.type,answer:e.text})}return e.$$set=e=>{"chatbotTheme"in e&&n(0,d=e.chatbotTheme),"assetsUrl"in e&&n(1,p=e.assetsUrl)},[d,p,u,i,r,c,l,h,f,function(){o("submitFeedback",{type:a.type,answer:a.text,feedbackText:i})},e=>f(e),function(){i=this.value,r.set(i)}]}class mn extends Ie{constructor(e){super(),Te(this,e,Dn,gn,B,{chatbotTheme:0,assetsUrl:1})}}const{document:Fn}=M;function En(e,t,n){const i=e.slice();return i[45]=t[n],i}function bn(e,t,n){const i=e.slice();return i[48]=t[n],i[50]=n,i}function wn(e,t,n){const i=e.slice();return i[51]=t[n],i}function Cn(e,t,n){const i=e.slice();return i[51]=t[n],i}function vn(e){let t,n,i,s,r,o,u,a,c,l,h,d,p,f,g,D,m,F;function E(e,t){return e[7]?An:kn}let b=E(e),w=b(e);h=new ln({props:{iconUrl:`${e[0]}/${e[9]}/icon-minimize.svg`}});const C=[_n,yn],v=[];function k(e,t){return e[7]?0:1}return p=k(e),f=v[p]=C[p](e),{c(){t=H("section"),n=H("div"),i=H("div"),s=H("span"),r=H("img"),a=K(),w.c(),c=K(),l=H("button"),ye(h.$$.fragment),d=K(),f.c(),$(r.src,o=e[8].tenantConfig.chatHeader.headerLogoUrl)||Z(r,"src",o),Z(r,"alt",u=e[8].tenantConfig.chatHeader.headerLogoAltText),Z(s,"class","chatbot__header__logo"),Z(l,"class","chatbot__header__close-chat"),Z(i,"class","chatbot__header"),J(i,"background-color",e[8].tenantConfig.chatHeader.backgroundColor),Z(n,"class","chatbot__window"),Z(t,"class",g="chatbot chatbot--is-active chatbot--is-initialized "+(e[8].mediaMode?` chatbot--mediamode-${e[8].mediaMode}`:""))},m(o,u){z(o,t,u),L(t,n),L(n,i),L(i,s),L(s,r),L(i,a),w.m(i,null),L(i,c),L(i,l),_e(h,l,null),L(n,d),v[p].m(n,null),e[37](n),D=!0,m||(F=Q(l,"click",e[20]),m=!0)},p(e,s){(!D||256&s[0]&&!$(r.src,o=e[8].tenantConfig.chatHeader.headerLogoUrl))&&Z(r,"src",o),(!D||256&s[0]&&u!==(u=e[8].tenantConfig.chatHeader.headerLogoAltText))&&Z(r,"alt",u),b===(b=E(e))&&w?w.p(e,s):(w.d(1),w=b(e),w&&(w.c(),w.m(i,c)));const a={};1&s[0]&&(a.iconUrl=`${e[0]}/${e[9]}/icon-minimize.svg`),h.$set(a),(!D||256&s[0])&&J(i,"background-color",e[8].tenantConfig.chatHeader.backgroundColor);let l=p;p=k(e),p===l?v[p].p(e,s):(we(),ke(v[l],1,1,(()=>{v[l]=null})),Ce(),f=v[p],f?f.p(e,s):(f=v[p]=C[p](e),f.c()),ve(f,1),f.m(n,null)),(!D||256&s[0]&&g!==(g="chatbot chatbot--is-active chatbot--is-initialized "+(e[8].mediaMode?` chatbot--mediamode-${e[8].mediaMode}`:"")))&&Z(t,"class",g)},i(e){D||(ve(h.$$.fragment,e),ve(f),D=!0)},o(e){ke(h.$$.fragment,e),ke(f),D=!1},d(n){n&&P(t),w.d(),xe(h),v[p].d(),e[37](null),m=!1,F()}}}function kn(e){let t,n,i=e[8].tenantConfig.chatHeader.title+"";return{c(){t=H("span"),n=V(i),Z(t,"class","chatbot__header__title")},m(e,i){z(e,t,i),L(t,n)},p(e,t){256&t[0]&&i!==(i=e[8].tenantConfig.chatHeader.title+"")&&Y(n,i)},d(e){e&&P(t)}}}function An(e){let t;return{c(){t=H("span"),t.textContent="Feedback",Z(t,"class","chatbot__header__title")},m(e,n){z(e,t,n)},p:y,d(e){e&&P(t)}}}function yn(e){let t,n,i,s,r,o,u,a,c,l,h,d,p,f,g,D,m,F,E,b,w,C=e[8].remainingCharacters+"",v=Ae(e[8].messageHistory),k=[];for(let t=0;t<v.length;t+=1)k[t]=Pn(bn(e,v,t));const A=e=>ke(k[e],1,1,(()=>{k[e]=null}));let y=e[8].isInactive&&Un(e),_=e[8].isBotTyping&&Hn(e),x=e[8].suggestions&&e[8].suggestions.length>0&&!e[8].isBotTyping&&!e[8].hideSuggestions&&Wn(e),I=e[8].hasErrors&&Kn(e);return p=new ln({props:{iconUrl:`${e[0]}/${e[9]}/icon-message-send.svg`}}),{c(){t=H("ul");for(let e=0;e<k.length;e+=1)k[e].c();n=K(),y&&y.c(),i=K(),_&&_.c(),s=K(),x&&x.c(),r=K(),o=H("form"),I&&I.c(),u=K(),a=H("div"),c=H("textarea"),h=K(),d=H("button"),ye(p.$$.fragment),g=K(),D=H("span"),m=V(C),F=V(" character(s) remaining"),Z(t,"class","chatbot__dialogue"),Z(c,"class","chatbot__input"),Z(c,"rows","1"),Z(c,"placeholder","Type here..."),c.disabled=l=e[8].disableForm,Z(d,"class","chatbot__send"),d.disabled=f=e[8].disableForm||""===e[8].inputValue.trim(),Z(a,"class","chatbot__form__controls"),Z(D,"class","chatbot__input__char-count"),Z(o,"class","chatbot__form"),X(o,"chatbot__form--has-error",e[8].hasErrors)},m(l,f){z(l,t,f);for(let e=0;e<k.length;e+=1)k[e]&&k[e].m(t,null);L(t,n),y&&y.m(t,null),L(t,i),_&&_.m(t,null),L(t,s),x&&x.m(t,null),e[30](t),z(l,r,f),z(l,o,f),I&&I.m(o,null),L(o,u),L(o,a),L(a,c),e[31](c),G(c,e[8].inputValue),L(a,h),L(a,d),_e(p,d,null),L(o,g),L(o,D),L(D,m),L(D,F),E=!0,b||(w=[Q(c,"input",e[32]),Q(c,"keypress",e[33]),Q(c,"input",e[34]),Q(d,"keypress",e[35]),Q(d,"click",e[36])],b=!0)},p(e,r){if(312081&r[0]){let i;for(v=Ae(e[8].messageHistory),i=0;i<v.length;i+=1){const s=bn(e,v,i);k[i]?(k[i].p(s,r),ve(k[i],1)):(k[i]=Pn(s),k[i].c(),ve(k[i],1),k[i].m(t,n))}for(we(),i=v.length;i<k.length;i+=1)A(i);Ce()}e[8].isInactive?y?y.p(e,r):(y=Un(e),y.c(),y.m(t,i)):y&&(y.d(1),y=null),e[8].isBotTyping?_?_.p(e,r):(_=Hn(e),_.c(),_.m(t,s)):_&&(_.d(1),_=null),e[8].suggestions&&e[8].suggestions.length>0&&!e[8].isBotTyping&&!e[8].hideSuggestions?x?x.p(e,r):(x=Wn(e),x.c(),x.m(t,null)):x&&(x.d(1),x=null),e[8].hasErrors?I?I.p(e,r):(I=Kn(e),I.c(),I.m(o,u)):I&&(I.d(1),I=null),(!E||256&r[0]&&l!==(l=e[8].disableForm))&&(c.disabled=l),256&r[0]&&G(c,e[8].inputValue);const a={};1&r[0]&&(a.iconUrl=`${e[0]}/${e[9]}/icon-message-send.svg`),p.$set(a),(!E||256&r[0]&&f!==(f=e[8].disableForm||""===e[8].inputValue.trim()))&&(d.disabled=f),(!E||256&r[0])&&C!==(C=e[8].remainingCharacters+"")&&Y(m,C),(!E||256&r[0])&&X(o,"chatbot__form--has-error",e[8].hasErrors)},i(e){if(!E){for(let e=0;e<v.length;e+=1)ve(k[e]);ve(p.$$.fragment,e),E=!0}},o(e){k=k.filter(Boolean);for(let e=0;e<k.length;e+=1)ke(k[e]);ke(p.$$.fragment,e),E=!1},d(n){n&&(P(t),P(r),P(o)),U(k,n),y&&y.d(),_&&_.d(),x&&x.d(),e[30](null),I&&I.d(),e[31](null),xe(p),b=!1,T(w)}}}function _n(e){let t,n;return t=new mn({props:{assetsUrl:e[0],chatbotTheme:e[9]}}),t.$on("submitFeedback",e[11]),{c(){ye(t.$$.fragment)},m(e,i){_e(t,e,i),n=!0},p(e,n){const i={};1&n[0]&&(i.assetsUrl=e[0]),t.$set(i)},i(e){n||(ve(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function xn(e){let t;return{c(){t=H("span"),t.textContent="Virtual Assistant",Z(t,"class","chatbot__message__label")},m(e,n){z(e,t,n)},d(e){e&&P(t)}}}function Tn(e){let t,n,i,s,r,o,u,a=e[48].content+"",c=e[48].citationsData&&e[48].citationsData.length>0&&Bn(e),l=void 0!==e[48].conversationId&&e[48].reactionsEligible&&0!==e[50]&&zn(e);function h(...t){return e[25](e[48],...t)}function d(...t){return e[26](e[48],...t)}return{c(){t=H("div"),n=new ee(!1),i=K(),c&&c.c(),s=K(),l&&l.c(),n.a=i,Z(t,"class","chatbot__message__text")},m(p,f){z(p,t,f),n.m(a,t),L(t,i),c&&c.m(t,null),L(t,s),l&&l.m(t,null),e[24](t),r=!0,o||(u=[Q(t,"keydown",h),Q(t,"click",q(d))],o=!0)},p(i,o){e=i,(!r||256&o[0])&&a!==(a=e[48].content+"")&&n.p(a),e[48].citationsData&&e[48].citationsData.length>0?c?c.p(e,o):(c=Bn(e),c.c(),c.m(t,s)):c&&(c.d(1),c=null),void 0!==e[48].conversationId&&e[48].reactionsEligible&&0!==e[50]?l?(l.p(e,o),256&o[0]&&ve(l,1)):(l=zn(e),l.c(),ve(l,1),l.m(t,null)):l&&(we(),ke(l,1,1,(()=>{l=null})),Ce())},i(e){r||(ve(l),r=!0)},o(e){ke(l),r=!1},d(n){n&&P(t),c&&c.d(),l&&l.d(),e[24](null),o=!1,T(u)}}}function In(e){let t,n,i=e[48].content+"";return{c(){t=H("div"),n=V(i),Z(t,"class","chatbot__message__text")},m(e,i){z(e,t,i),L(t,n)},p(e,t){256&t[0]&&i!==(i=e[48].content+"")&&Y(n,i)},i:y,o:y,d(e){e&&P(t)}}}function Bn(e){let t,n,i,s,r,o,u,a,c,l,h=e[48].citationsData.length>1?"These pages":"This page",d=e[48].materials.showExpandedCitations&&Sn(e);function p(...t){return e[21](e[48],...t)}let f=(e[48].isExpanded||!e[48].materials.showExpandedCitations)&&$n(e);return{c(){t=H("br"),n=K(),i=H("button"),s=V(h),r=V(" may provide additional help\n                        "),d&&d.c(),u=K(),f&&f.c(),a=j(),Z(i,"class","chatbot__show-citations-button"),Z(i,"aria-expanded",o=e[48].isExpanded),J(i,"border","none"),Z(i,"data-show-citations",""),X(i,"chatbot__show-citations-button--is-active",e[48].materials.showExpandedCitations)},m(e,o){z(e,t,o),z(e,n,o),z(e,i,o),L(i,s),L(i,r),d&&d.m(i,null),z(e,u,o),f&&f.m(e,o),z(e,a,o),c||(l=Q(i,"click",p),c=!0)},p(t,n){e=t,256&n[0]&&h!==(h=e[48].citationsData.length>1?"These pages":"This page")&&Y(s,h),e[48].materials.showExpandedCitations?d?d.p(e,n):(d=Sn(e),d.c(),d.m(i,null)):d&&(d.d(1),d=null),256&n[0]&&o!==(o=e[48].isExpanded)&&Z(i,"aria-expanded",o),256&n[0]&&X(i,"chatbot__show-citations-button--is-active",e[48].materials.showExpandedCitations),e[48].isExpanded||!e[48].materials.showExpandedCitations?f?f.p(e,n):(f=$n(e),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},d(e){e&&(P(t),P(n),P(i),P(u),P(a)),d&&d.d(),f&&f.d(e),c=!1,l()}}}function Sn(e){let t,n,i;return{c(){t=H("span"),n=W("svg"),i=W("path"),Z(i,"d","M4.99961 3.24846L1.65211 0.181872C1.39394 -0.0540194 0.962067 -0.0577343 0.698485 0.183729C0.432199 0.427669 0.43355 0.817107 0.696457 1.05733L4.99961 5L9.30412 1.05609C9.5623 0.819584 9.56635 0.423955 9.3021 0.182491C9.03649 -0.06083 8.61137 -0.0602108 8.34847 0.180634L4.99961 3.24846Z"),Z(i,"fill","#121619"),Z(n,"class","chatbot__citations__expand-icon"),Z(n,"width","10"),Z(n,"height","5"),Z(n,"viewBox","0 0 10 5"),Z(n,"fill","none"),Z(n,"xmlns","http://www.w3.org/2000/svg"),X(n,"chatbot__citations__expand-icon--is-expanded",e[48].isExpanded)},m(e,s){z(e,t,s),L(t,n),L(n,i)},p(e,t){256&t[0]&&X(n,"chatbot__citations__expand-icon--is-expanded",e[48].isExpanded)},d(e){e&&P(t)}}}function $n(e){let t;function n(e,t){return e[48].materials.showExpandedCitations?On:Nn}let i=n(e),s=i(e);return{c(){s.c(),t=j()},m(e,n){s.m(e,n),z(e,t,n)},p(e,r){i===(i=n(e))&&s?s.p(e,r):(s.d(1),s=i(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){e&&P(t),s.d(e)}}}function Nn(e){let t,n=Ae(e[48].citationsData.slice(0,3)),i=[];for(let t=0;t<n.length;t+=1)i[t]=Rn(wn(e,n,t));return{c(){t=H("ul");for(let e=0;e<i.length;e+=1)i[e].c();Z(t,"class","chatbot__message__citations")},m(e,n){z(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,s){if(256&s[0]){let r;for(n=Ae(e[48].citationsData.slice(0,3)),r=0;r<n.length;r+=1){const o=wn(e,n,r);i[r]?i[r].p(o,s):(i[r]=Rn(o),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){e&&P(t),U(i,e)}}}function On(e){let t,n=Ae(e[48].citationsData.slice(0,3)),i=[];for(let t=0;t<n.length;t+=1)i[t]=Ln(Cn(e,n,t));return{c(){t=H("ul");for(let e=0;e<i.length;e+=1)i[e].c();Z(t,"class","chatbot__message__citations")},m(e,n){z(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,s){if(256&s[0]){let r;for(n=Ae(e[48].citationsData.slice(0,3)),r=0;r<n.length;r+=1){const o=Cn(e,n,r);i[r]?i[r].p(o,s):(i[r]=Ln(o),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(e){e&&P(t),U(i,e)}}}function Rn(e){let t,n,i,s,r,o=e[51].title+"";return{c(){t=H("li"),n=H("a"),i=V(o),r=K(),Z(n,"href",s=e[51].id),Z(n,"target","_blank")},m(e,s){z(e,t,s),L(t,n),L(n,i),L(t,r)},p(e,t){256&t[0]&&o!==(o=e[51].title+"")&&Y(i,o),256&t[0]&&s!==(s=e[51].id)&&Z(n,"href",s)},d(e){e&&P(t)}}}function Mn(e){let t,n,i=e[51].text+"";return{c(){t=H("p"),n=V(i)},m(e,i){z(e,t,i),L(t,n)},p(e,t){256&t[0]&&i!==(i=e[51].text+"")&&Y(n,i)},d(e){e&&P(t)}}}function Ln(e){let t,n,i,s,r,o,u=e[51].title+"",a=e[51].text&&Mn(e);return{c(){t=H("li"),n=H("a"),i=V(u),r=K(),a&&a.c(),o=K(),Z(n,"href",s=e[51].id),Z(n,"target","_blank"),Z(n,"class","chatbot__message__citation-entry__link"),Z(t,"class","chatbot__message__citation-entry")},m(e,s){z(e,t,s),L(t,n),L(n,i),L(t,r),a&&a.m(t,null),L(t,o)},p(e,r){256&r[0]&&u!==(u=e[51].title+"")&&Y(i,u),256&r[0]&&s!==(s=e[51].id)&&Z(n,"href",s),e[51].text?a?a.p(e,r):(a=Mn(e),a.c(),a.m(t,o)):a&&(a.d(1),a=null)},d(e){e&&P(t),a&&a.d()}}}function zn(e){let t,n,i,s,r,o,u,a,c,l,h;function d(){return e[22](e[48])}function p(){return e[23](e[48])}return i=new ln({props:{iconUrl:`${e[0]}/${e[9]}/icon-positive-reaction.svg`}}),u=new ln({props:{iconUrl:`${e[0]}/${e[9]}/icon-negative-reaction.svg`}}),{c(){t=H("div"),n=H("button"),ye(i.$$.fragment),r=K(),o=H("button"),ye(u.$$.fragment),Z(n,"aria-label",s=e[8].tenantConfig.chatDialogue.positiveReactionIconAriaLabel),Z(n,"class","chatbot__message__reaction"),X(n,"chatbot__message__reaction--clicked","LIKE"===e[48].reaction),Z(o,"aria-label",a=e[8].tenantConfig.chatDialogue.negativeReactionIconAriaLabel),Z(o,"class","chatbot__message__reaction"),X(o,"chatbot__message__reaction--clicked","DISLIKE"===e[48].reaction),Z(t,"class","chatbot__message__reactions")},m(e,s){z(e,t,s),L(t,n),_e(i,n,null),L(t,r),L(t,o),_e(u,o,null),c=!0,l||(h=[Q(n,"click",d),Q(o,"click",p)],l=!0)},p(t,r){e=t;const l={};1&r[0]&&(l.iconUrl=`${e[0]}/${e[9]}/icon-positive-reaction.svg`),i.$set(l),(!c||256&r[0]&&s!==(s=e[8].tenantConfig.chatDialogue.positiveReactionIconAriaLabel))&&Z(n,"aria-label",s),(!c||256&r[0])&&X(n,"chatbot__message__reaction--clicked","LIKE"===e[48].reaction);const h={};1&r[0]&&(h.iconUrl=`${e[0]}/${e[9]}/icon-negative-reaction.svg`),u.$set(h),(!c||256&r[0]&&a!==(a=e[8].tenantConfig.chatDialogue.negativeReactionIconAriaLabel))&&Z(o,"aria-label",a),(!c||256&r[0])&&X(o,"chatbot__message__reaction--clicked","DISLIKE"===e[48].reaction)},i(e){c||(ve(i.$$.fragment,e),ve(u.$$.fragment,e),c=!0)},o(e){ke(i.$$.fragment,e),ke(u.$$.fragment,e),c=!1},d(e){e&&P(t),xe(i),xe(u),l=!1,T(h)}}}function Pn(e){let t,n,i,s,r,o=("assistant"===e[48].style||"assistant"===e[48].role)&&xn();const u=[In,Tn],a=[];function c(e,t){return"user"===e[48].role?0:1}return i=c(e),s=a[i]=u[i](e),{c(){t=H("li"),o&&o.c(),n=K(),s.c(),Z(t,"class","chatbot__message"),X(t,"chatbot__message--is-bot","assistant"===e[48].style||"assistant"===e[48].role),X(t,"chatbot__message--is-inline-selection-list","inlineSelectionList"===e[48].style)},m(e,s){z(e,t,s),o&&o.m(t,null),L(t,n),a[i].m(t,null),r=!0},p(e,l){"assistant"===e[48].style||"assistant"===e[48].role?o||(o=xn(),o.c(),o.m(t,n)):o&&(o.d(1),o=null);let h=i;i=c(e),i===h?a[i].p(e,l):(we(),ke(a[h],1,1,(()=>{a[h]=null})),Ce(),s=a[i],s?s.p(e,l):(s=a[i]=u[i](e),s.c()),ve(s,1),s.m(t,null)),(!r||256&l[0])&&X(t,"chatbot__message--is-bot","assistant"===e[48].style||"assistant"===e[48].role),(!r||256&l[0])&&X(t,"chatbot__message--is-inline-selection-list","inlineSelectionList"===e[48].style)},i(e){r||(ve(s),r=!0)},o(e){ke(s),r=!1},d(e){e&&P(t),o&&o.d(),a[i].d()}}}function Un(e){let t,n,i,s,r,o,u,a,c,l,h,d;return{c(){t=H("li"),n=H("span"),n.textContent="Virtual Assistant",i=K(),s=H("div"),s.textContent=`${ft.INACTIVITY_PROMPT}`,r=K(),o=H("li"),u=H("div"),a=H("button"),a.textContent="Yes",c=K(),l=H("button"),l.textContent="No",Z(n,"class","chatbot__message__label"),Z(s,"class","chatbot__message__text"),Z(t,"class","chatbot__message chatbot__message--is-bot"),Z(a,"class","selection-prompt__yes"),Z(l,"class","selection-prompt__no"),Z(u,"class","chatbot__message__text"),Z(o,"class","chatbot__message"),X(o,"chatbot__message--is-bot",!0),X(o,"chatbot__message--is-selection-prompt",!0)},m(p,f){z(p,t,f),L(t,n),L(t,i),L(t,s),z(p,r,f),z(p,o,f),L(o,u),L(u,a),L(u,c),L(u,l),e[27](u),h||(d=[Q(a,"click",q(e[16])),Q(l,"click",q(e[17]))],h=!0)},p:y,d(n){n&&(P(t),P(r),P(o)),e[27](null),h=!1,T(d)}}}function Hn(e){let t,n,i,s,r,o=e[8].tenantConfig.chatDialogue.loaderText+"";return{c(){t=H("li"),n=H("span"),i=K(),s=H("span"),r=V(o),Z(n,"class","chatbot__message__loader"),Z(s,"class","chatbot__message__loader__text"),Z(t,"class","chatbot__message chatbot__message--is-loader")},m(e,o){z(e,t,o),L(t,n),L(t,i),L(t,s),L(s,r)},p(e,t){256&t[0]&&o!==(o=e[8].tenantConfig.chatDialogue.loaderText+"")&&Y(r,o)},d(e){e&&P(t)}}}function Wn(e){let t,n=Ae(e[8].suggestions),i=[];for(let t=0;t<n.length;t+=1)i[t]=Vn(En(e,n,t));return{c(){t=H("div");for(let e=0;e<i.length;e+=1)i[e].c();Z(t,"class","chatbot__suggestions")},m(n,s){z(n,t,s);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);e[29](t)},p(e,s){if(8448&s[0]){let r;for(n=Ae(e[8].suggestions),r=0;r<n.length;r+=1){const o=En(e,n,r);i[r]?i[r].p(o,s):(i[r]=Vn(o),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(n){n&&P(t),U(i,n),e[29](null)}}}function Vn(e){let t,n,i,s,r,o=e[45].name+"";function u(...t){return e[28](e[45],...t)}return{c(){t=H("button"),n=V(o),i=K(),Z(t,"class","chatbot__suggestion")},m(e,o){z(e,t,o),L(t,n),L(t,i),s||(r=Q(t,"click",u),s=!0)},p(t,i){e=t,256&i[0]&&o!==(o=e[45].name+"")&&Y(n,o)},d(e){e&&P(t),s=!1,r()}}}function Kn(e){let t;function n(e,t){return e[8].errorMsg?Qn:jn}let i=n(e),s=i(e);return{c(){t=H("span"),s.c(),Z(t,"class","chatbot__form__error")},m(e,n){z(e,t,n),s.m(t,null)},p(e,r){i===(i=n(e))&&s?s.p(e,r):(s.d(1),s=i(e),s&&(s.c(),s.m(t,null)))},d(e){e&&P(t),s.d()}}}function jn(e){let t;return{c(){t=V("Sorry, it appears there was an error. Please try again or refresh the page. We apologize for the inconvenience.")},m(e,n){z(e,t,n)},p:y,d(e){e&&P(t)}}}function Qn(e){let t,n,i=e[8].errorMsg+"";return{c(){t=new ee(!1),n=j(),t.a=n},m(e,s){t.m(i,e,s),z(e,n,s)},p(e,n){256&n[0]&&i!==(i=e[8].errorMsg+"")&&t.p(i)},d(e){e&&(P(n),t.d())}}}function qn(e){let t,n;return{c(){t=H("link"),Z(t,"rel","stylesheet"),Z(t,"href",n=e[0]+"/"+e[9]+"/index.css")},m(e,n){z(e,t,n)},p(e,i){1&i[0]&&n!==(n=e[0]+"/"+e[9]+"/index.css")&&Z(t,"href",n)},d(e){e&&P(t)}}}function Zn(e){let t,n,i,s=e[8].tenantConfig.theme&&vn(e),r=e[0]&&e[9]&&qn(e);return{c(){s&&s.c(),t=K(),r&&r.c(),n=j()},m(e,o){s&&s.m(e,o),z(e,t,o),r&&r.m(Fn.head,null),L(Fn.head,n),i=!0},p(e,i){e[8].tenantConfig.theme?s?(s.p(e,i),256&i[0]&&ve(s,1)):(s=vn(e),s.c(),ve(s,1),s.m(t.parentNode,t)):s&&(we(),ke(s,1,1,(()=>{s=null})),Ce()),e[0]&&e[9]?r?r.p(e,i):(r=qn(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i(e){i||(ve(s),i=!0)},o(e){ke(s),i=!1},d(e){e&&P(t),s&&s.d(e),r&&r.d(e),P(n)}}}function Yn(e){e&&e.scroll({top:e.scrollHeight,behavior:"smooth"})}function Gn(e){window.chatbotIFrame.buttonClick({buttonText:e.target.innerText})}function Jn(e,t,i){let a,c,l,d,p,f,g;R(e,on,(e=>i(8,a=e)));let D=!0,F=!0,E=!0,b=!1,w=window.chatbotIFrame.tenantConfig.theme,{assetsUrl:C=""}=t;function v(){window.eventTracker.track({type:s.BUTTON_CLICK,details:{intent:"hide-chat-window"}}),a.tenantConfig.askFeedback&&!b?i(7,b=!0):(i(7,b=!1),window.chatbotIFrame.closeChatWindow())}async function k(e){e.preventDefault(),""!==a.inputValue.trim()&&(await on.handleSubmit(),c?.focus(),y(p.innerHTML))}async function A(e,t){Gn(e),await on.handleSuggestionClick(t),Yn(d),c?.focus(),y(p.innerHTML)}function y(e){const t={html:e,messageHistoryHTML:d?.innerHTML};window.chatbotIFrame.botResponse(t)}async function _(e,t){if(t.target&&"A"===t.target.tagName&&t.target.href){const n={url:t.target.href,caption:t.target.innerText};window.chatbotIFrame.openWindow(t.target.href),function(e){window.chatbotIFrame.linkClick(e)}(n);const i=a.activeFlowId;window.eventTracker.track({type:s.LINK_CLICK,details:{...n,conversationId:e,flowId:i,intent:"view-content"}})}}function x(e,t){e.stopPropagation(),on.handleCitationsClick(t)}const T=m(((e,t)=>{on.handleReaction(e,t)}),200);async function I(){await on.onWindowActive()}async function B(){a.isInitialized||(window.chatbotIFrame.on(n.WINDOW_FOCUS,I),await on.init(window.chatbotIFrame.tenantName,window.chatbotIFrame.userEmail,window.chatbotIFrame.tenantConfig),y(a.tenantConfig.botInitialMessage),Yn(d),c?.focus()),await on.getCurrentFlow()}function S({mediaMode:e}){on.handleMediaModeChange(e),document.body.classList.toggle("chatbot--mediamode-desktop","desktop"===e)}function $(){try{const e=window.getComputedStyle(c);if(i(1,c.style.overflow=c.scrollHeight>parseFloat(e.maxHeight)?"auto":"hidden",c),""===c.value.trim()){const e=window.getComputedStyle(c,"::after");return void i(1,c.style.height=`${parseFloat(e.height)}px`,c)}i(1,c.style.height="auto",c),i(1,c.style.height=`${c.scrollHeight+1}px`,c)}catch(e){}}se((()=>{window.chatbotIFrame.on(n.MEDIA_QUERY_LIST_EVENT,S),window.chatbotIFrame.on(n.CHAT_WINDOW_SHOWN,B)})),on.subscribe((async e=>{e.isInactive&&D&&(D=!1,await pe(),Yn(d),y(f.innerHTML)),e.isInactive||D||(D=!0),e.terminateSessionMessageShown&&(await pe(),Yn(d),y(a.tenantConfig.terminateSessionMessage)),e.suggestions&&e.suggestions.length>0&&!e.isBotTyping&&!e.hideSuggestions&&F&&(F=!1,await pe(),Yn(d),y(g.innerHTML)),e.isBotTyping&&!F&&(F=!0),e.isBotTyping&&E&&(E=!1,await pe(),$(),Yn(d)),e.isBotTyping||E||(E=!0,await pe(),Yn(d))}));return e.$$set=e=>{"assetsUrl"in e&&i(0,C=e.assetsUrl)},[C,c,l,d,p,f,g,b,a,w,v,async function(e){window.eventTracker.track({type:s.SUBMIT_FEEDBACK,details:{intent:"submit-feedback",type:e.detail.type,answer:e.detail.answer,feedbackText:e.detail.feedbackText}}),await function(e){return o(this,void 0,void 0,(function(){var t;return u(this,(function(n){return fetch(wt,{method:"POST",headers:(t={"Content-Type":"application/json"},t[h]=window.chatbotIFrame.tenantName,t),credentials:"include",body:JSON.stringify(r({},e))}),[2]}))}))}(e.detail),i(7,b=!1),window.chatbotIFrame.closeChatWindow()},k,A,_,x,async function(e){Gn(e),window.eventTracker.track({type:s.BUTTON_CLICK,details:{intent:"continue-session"}}),await on.continueSession(),y(ft.CONTINUE_SESSION_MESSAGE),Yn(d),c?.focus()},async function(e){Gn(e),window.eventTracker.track({type:s.BUTTON_CLICK,details:{intent:"terminate-session"}}),await on.terminateSession()},T,$,()=>v(),(e,t)=>x(t,e.conversationId),e=>{T(e.conversationId,"LIKE")},e=>{T(e.conversationId,"DISLIKE")},function(e){ue[e?"unshift":"push"]((()=>{p=e,i(4,p)}))},(e,t)=>"Enter"===t.key&&_(e.conversationId,t),(e,t)=>_(e.conversationId,t),function(e){ue[e?"unshift":"push"]((()=>{f=e,i(5,f)}))},(e,t)=>A(t,e),function(e){ue[e?"unshift":"push"]((()=>{g=e,i(6,g)}))},function(e){ue[e?"unshift":"push"]((()=>{d=e,i(3,d)}))},function(e){ue[e?"unshift":"push"]((()=>{c=e,i(1,c)}))},function(){a.inputValue=this.value,on.set(a)},e=>"Enter"===e.key&&k(e),e=>{on.handleInput(e),$()},e=>"Enter"===e.key&&k(e),e=>k(e),function(e){ue[e?"unshift":"push"]((()=>{l=e,i(2,l)}))}]}class Xn extends Ie{constructor(e){super(),Te(this,e,Jn,Zn,B,{assetsUrl:0},null,[-1,-1])}}var ei=function(){function e(e,t){void 0===e&&(e=""),void 0===t&&(t=!1),this.eventsQueue=new Set,this.maxQueueSize=5,this.logTag="chatbot:tracker",this.sendEventsIntervalTime=3e4,this.eventCollectorEndpoint="",this.sendImmediately=!0,this.collectOnly=!1,this.commonProperties=new Map,f.info(this.logTag,"Initializing event tracker.."),this.collectOnly=t,e&&(this.eventCollectorEndpoint=e,this.setupSendTriggers())}return e.prototype.setupSendTriggers=function(){var e=this;window.addEventListener("visibilitychange",(function(){return"hidden"===document.visibilityState&&e.sendEvents()})),this.sendImmediately||(this.sendEventsInterval=window.setInterval(this.shouldSendEvents.bind(this),this.sendEventsIntervalTime),this.logInfo("Will send events every %s seconds",this.sendEventsIntervalTime/1e3))},e.prototype.sendWithBeacon=function(e,t){return o(this,void 0,void 0,(function(){return u(this,(function(n){return[2,new Promise((function(n,i){return navigator.sendBeacon(e,JSON.stringify(t))?n(!0):i("Could not send data with sendBeacon")}))]}))}))},e.prototype.sendWithFetch=function(e,t){return o(this,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fetch(e,{method:"POST",headers:(n={"Content-Type":"application/json"},n[h]=window.chatbotIFrame.tenantName,n),body:JSON.stringify(t),credentials:"include",keepalive:!0})];case 1:return i.sent().ok?[2,!0]:[3,3];case 2:return[2,i.sent()];case 3:return[2,!1]}}))}))},e.prototype.logInfo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f.info.apply(f,l([this.logTag],c(e),!1))},e.prototype.logError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f.error.apply(f,l([this.logTag],c(e),!1))},e.prototype.shouldSendEvents=function(){this.eventsQueue.size<this.maxQueueSize||this.sendEvents()},e.prototype.addEvent=function(e){var t,n,i;if(e.timestamp=null!==(i=e.timestamp)&&void 0!==i?i:(new Date).getTime(),e.details=e.details||{},e.details)try{for(var s=a(Array.from(this.commonProperties.entries())),r=s.next();!r.done;r=s.next()){var o=c(r.value,2),u=o[0],l=o[1];e.details[u]=l}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}this.eventsQueue.add(e)},e.prototype.sendEvents=function(){return o(this,void 0,void 0,(function(){var e,t,n,i;return u(this,(function(s){switch(s.label){case 0:if(!this.eventCollectorEndpoint||!this.eventsQueue.size||this.collectOnly)return[2];e=new Set(this.eventsQueue),this.eventsQueue.clear(),f.info(this.logTag,"Tracked event(s): %o",Array.from(e)),s.label=1;case 1:return s.trys.push([1,3,,4]),t="function"==typeof navigator.sendBeacon?this.sendWithBeacon:this.sendWithFetch,n="".concat(this.eventCollectorEndpoint,"?tenantId=").concat(encodeURIComponent(window.chatbotIFrame.tenantName)),[4,t(n,{events:Array.from(e)})];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),e.forEach(this.eventsQueue.add,this.eventsQueue),this.logError("Error sending events: ".concat(i)),[3,4];case 4:return[2]}}))}))},e.prototype.track=function(e){Array.isArray(e)?e.forEach(this.addEvent.bind(this)):this.addEvent(e),this.sendImmediately&&this.sendEvents()},e.prototype.getEvents=function(){return Array.from(this.eventsQueue)},e.prototype.getState=function(){var e={commonProperties:Array.from(this.commonProperties.entries()),events:this.getEvents()};return JSON.parse(JSON.stringify(e))},e.prototype.setState=function(e){this.commonProperties=new Map(e.commonProperties),this.track(e.events)},e.prototype.addCommonProperties=function(e,t){this.commonProperties.set(e,t)},e.prototype.clearEvents=function(){this.eventsQueue.clear()},e.prototype.enableSendingEvents=function(){this.collectOnly&&(this.collectOnly=!1,this.sendEvents())},e.prototype.disableSendingEvents=function(){this.collectOnly=!0},e}(),ti=function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src;if(i.includes(e)){var s=new URL(i).href.replace(new RegExp("".concat(e,"$")),"");return s.endsWith("/")?s.slice(0,-1):s}}return""}("chatbot-iframe.js");
// name: chatbot-iframe version: 2.2.0
window.chatbotIFrame=new A(new e,"https://helpchatbot-service.aol.com/api/tenant/config",ti),window.eventTracker=new ei("https://helpchatbot-service.aol.com/api/stats",!0),window.chatbotIFrame.on(n.INIT_APP,(function(){var e=document.querySelector("#ais-chatbot");e&&new Xn({props:{assetsUrl:ti},target:e})})),window.chatbotIFrame.on(i.TRACK_EVENTS,(function(e){window.eventTracker.setState(e),window.eventTracker.sendEvents()}));try{window.chatbotIFrame.init({allowedOrigin:window.AIS.allowedOrigins[0]})}catch(e){f.error(e)}}();
